/* =========================
   src/index.css (FULL)
   Mobile-first, robust, fixes cropping/overflow,
   ensures board centers, uses aspect-ratio for perfect squares,
   clears side-gradient overflow and makes text visible.
   Replace entire src/index.css with this file.
   ========================= */

/* -------- Theme variables (light & dark) -------- */
:root{
  --bg: #071026; /* neutral dark background default */
  --card-bg: #071026cc;
  --muted: rgba(170,190,210,0.55);
  --primary: #60a5fa;   /* Player A */
  --accent:  #fb7185;   /* Player B */
  --warning: #ffd54d;
  --text: #e6eef8;
  --card-border: rgba(255,255,255,0.04);
  --cell-bg: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
  --cell-border: rgba(255,255,255,0.03);
  --shadow: 0 12px 40px rgba(0,0,0,0.6);
}

/* Light-mode toggling class (if you use it elsewhere) */
.light {
  --bg: #f5f7fb;
  --card-bg: #fff;
  --muted: #6c757d;
  --primary: #2563eb;
  --accent:  #e11d48;
  --text: #0f172a;
  --card-border: rgba(16,24,40,0.06);
  --cell-bg: linear-gradient(180deg, rgba(255,255,255,1), rgba(255,255,255,1));
  --cell-border: rgba(15,23,42,0.06);
  --shadow: 0 8px 30px rgba(32,41,56,0.06);
}

/* -------- Base & layout -------- */
*{ box-sizing:border-box; }
html,body,#root{ height:100%; width:100%; }
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background: linear-gradient(180deg, var(--bg), #041024);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden; /* prevent horizontal scroll */
  padding:12px 8px;
}

/* app shell centers the card */
.app-shell{
  display:flex;
  justify-content:center;
  align-items:flex-start;
  min-height:100vh;
  width:100%;
  gap:12px;
}

/* main card */
.card.game-card{
  width:100%;
  max-width:760px;
  margin: 0 auto;
  border-radius:14px;
  background: linear-gradient(180deg, rgba(6,10,18,0.96), rgba(4,6,12,0.96));
  border:1px solid var(--card-border);
  box-shadow: var(--shadow);
  overflow:visible;
  padding: 10px 12px;
}

/* header */
.card-header-modern{
  display:flex;
  gap:12px;
  align-items:flex-start;
  justify-content:space-between;
  flex-wrap:wrap;
  padding:12px 12px 6px;
}
.title-wrap { flex:1 1 220px; min-width:160px; }
.title-wrap h1{
  margin:0 0 6px 0;
  font-size:1.25rem;
  font-weight:800;
  color:var(--text);
  display:flex;
  align-items:baseline;
  gap:8px;
}
.title-wrap small{ display:block; color:var(--muted); font-weight:600; font-size:0.9rem; }

/* header controls */
.header-actions{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.header-actions .btn{ padding:6px 10px; border-radius:8px; font-size:0.9rem; }

/* card body */
.card-body-modern{ padding:10px 10px 18px; display:flex; flex-direction:column; gap:12px; }

/* preview row */
.preview-row{ display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap; }
.preview-side{ display:flex; align-items:center; gap:10px; min-width:120px; }
.preview-side .label{ color:var(--muted); font-weight:700; }

/* -------- Board container & grid (responsive) -------- */
/* board container centers the grid and constrains width */
.board-container{
  display:flex;
  justify-content:center;
  align-items:center;
  width:100%;
  padding:8px;
  border-radius:12px;
}

/* board grid: mobile-first width that fits most phones */
.board-grid{
  width: min(360px, 94vw);   /* ensures it fits phone view */
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:10px;
  padding:6px;
  box-sizing:border-box;
  margin: 0 auto;
}

/* cell uses aspect-ratio for perfect squares across devices */
.cell{
  background: var(--cell-bg);
  border: 1px solid var(--cell-border);
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  user-select:none;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  transition: transform 160ms ease, box-shadow 160ms ease;
  aspect-ratio: 1 / 1;   /* key: makes cell a square */
  overflow:visible;
}
.cell:active{ transform: scale(0.98); }
.cell:hover{ transform: translateY(-6px); }

/* avatar wrapper centers svg & fills color */
.cell .avatar{
  width:68%;
  height:68%;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}
.cell .avatar svg{ width:100%; height:100%; display:block; fill:currentColor; }

/* placeholder empty */
.cell .avatar.empty{ opacity:0.06; }

/* X/O typography */
.xo{ font-weight:900; font-size: clamp(28px, 8vw, 64px); color:var(--text); }
.xo.x{ color:var(--primary) !important; text-shadow:0 6px 18px rgba(96,165,250,0.08); }
.xo.o{ color:var(--accent) !important; text-shadow:0 6px 18px rgba(251,113,133,0.08); }

/* ensure winning pulsing keeps scale & look */
.win-pulse{ animation: winPulse 900ms ease both; }
@keyframes winPulse{
  0%{ transform:scale(1); }
  50%{ transform:scale(1.06); }
  100%{ transform:scale(1); }
}

/* strong player color rules (and inline fallback if needed) */
.cell .avatar[data-player="A"]{ color: var(--primary) !important; filter: drop-shadow(0 18px 36px rgba(96,165,250,0.12)); }
.cell .avatar[data-player="B"]{ color: var(--accent)  !important; filter: drop-shadow(0 18px 36px rgba(251,113,133,0.10)); }

/* force all svg children to use currentColor */
.cell .avatar, .cell .avatar *{ color:inherit !important; }
.cell .avatar svg, .cell .avatar svg *{ fill: currentColor !important; stroke: none !important; }

/* -------- status / controls / scoreboard -------- */
.status-row{ display:flex; justify-content:center; align-items:center; gap:12px; padding:6px; flex-wrap:wrap; }
.status-left{ font-weight:800; font-size:1rem; color:var(--text); text-align:center; width:100%; }

.controls{ display:flex; gap:10px; align-items:center; justify-content:center; }
.controls .btn{ padding:8px 12px; border-radius:8px; }

/* scoreboard: stacked and centered on mobile */
.scoreboard{ display:flex; justify-content:space-around; gap:12px; padding:8px; margin-top:8px; }
.score-col{ text-align:center; min-width:72px; }
.score-col .label{ color:var(--muted); font-weight:700; margin-bottom:6px; }
.score-col .value{ font-weight:900; font-size:1.1rem; color:var(--text); }
.score-col.player-a .value{ color:var(--primary); }
.score-col.player-b .value{ color:var(--accent); }
.score-col.draws .value{ color:var(--warning); }

/* footer tip */
.tip-text{ color:var(--muted); font-weight:700; font-size:0.88rem; margin-top:8px; }

/* result modal */
.result-overlay{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:3000; pointer-events:auto; }
.result-card{ width:min(520px,94vw); padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(12,14,18,0.98), rgba(6,8,12,0.96)); border:1px solid var(--card-border); box-shadow: var(--shadow); color:var(--text); }

/* accessibility overrides */
.card.game-card, .card.game-card *{ color:var(--text) !important; }

/* ---------- Prevent horizontal overflow from gradients or side-elements ---------- */
html,body{ overflow-x:hidden !important; }
body::before, body::after{ display:none !important; }

/* ---------------- Responsive adjustments ---------------- */
@media (max-width:420px){
  body{ padding:8px; }
  .card.game-card{ max-width:380px; padding:8px 10px; border-radius:12px; }
  .title-wrap h1{ font-size:1.05rem; }
  .board-grid{ width:min(360px,92vw); gap:8px; padding:6px; }
  .cell{ border-radius:10px; }
  .status-left{ font-size:0.95rem; }
  .scoreboard{ flex-direction:column; align-items:center; padding:8px; gap:6px; }
  .score-col .value{ font-size:1.15rem; }
}

/* tablets & small laptops */
@media (min-width:421px) and (max-width:1024px){
  .card.game-card{ max-width:720px; }
  .board-grid{ width:min(460px,88vw); gap:10px; }
  .cell{ border-radius:12px; }
}

/* desktop */
@media (min-width:1025px){
  .card.game-card{ max-width:960px; padding:14px 18px; }
  .board-grid{ width:min(520px,60vw); gap:12px; }
  .cell{ border-radius:12px; }
}

/* utility */
.hidden{ display:none !important; }
.center{ display:flex; align-items:center; justify-content:center; }
